var Agile=A={version:"2.0.3",$:window.Zepto||jQuery,settings:{transitionType:"slide",transitionTime:250,transitionTimingFunc:"ease-in",toastDuration:3000,showPageLoading:false,basePagePath:"./",basePageSuffix:".html",crossDomainHandler:null,isAutoRender:false},mode:window.innerWidth<800?"phone":"tablet",hasTouch:"ontouchstart" in window,launchCompleted:false,hasAsideMenuOpen:false,hasPopupOpen:false,launch:function(a){$.extend(this.settings,a);this.Element.init();this.Router.init();this.AsideMenu.init();this.launchCompleted=true}};A.Element=(function($){var init=function(selector){if(selector){_initFormElement(selector);_init_scroll(selector.parents('article[data-scroll="true"]'))}else{_init_section();_init_article();_init_modal()}};var _initFormElement=function(selector){var $el=$(selector||"body");if($el.length==0){return}for(var k in FORM_SELECTOR){$.map(_getMatchElements($el,FORM_SELECTOR[k].selector),FORM_SELECTOR[k].handler)}$el=null};var _getMatchElements=function($el,selector){return $el.find(selector).add($el.filter(selector))};var _init_section=function(){$(document).on("pageload","section",function(e){var $el=$(this);$el.data("__pageload_tag__",true);var func=$el.data("pageload");if(func){eval(func)}if(A.settings.isAutoRender){_init_inject($el)}});$(document).on("pageshow","section",function(e){var $el=$(this);if(!$el.data("__pageload_tag__")){$el.trigger("pageload")}var func=$el.data("pageshow");if(func){eval(func)}});$(document).on("pagehide","section",function(e){var $el=$(this);var func=$el.data("pagehide");if(func){eval(func)}if($el.data("cache")==false){$el.remove()}})};var _init_article=function(){$(document).on("articleshow",'article[data-scroll="true"]',function(){var _this=this;setTimeout(function(){A.Element.scroll(_this)},500)});$(document).on("articleload","article",function(e){var $el=$(this);$el.data("__articleload_tag__",true);_initFormElement($el);var func=$el.data("articleload");if(func){eval(func)}});$(document).on("articleshow","article",function(e){var $el=$(this);if($el.data("title")){$el.parents("section").first().find("header .title").first().html(A.Util.script($el.data("title")))}if(!$el.data("__articleload_tag__")){$el.trigger("articleload")}var func=$el.data("articleshow");if(func){eval(func)}});$(document).on("articlehide","article",function(e){var $el=$(this);var func=$el.data("articlehide");if(func){eval(func)}if($el.data("cache")==false){$el.remove()}})};var _init_modal=function(){$(document).on("modalload",".modal",function(e){var $el=$(this);var func=$el.data("modalload");if(func){eval(func)}});$(document).on("modalshow",".modal",function(e){var $el=$(this);var showTag=$el.data("__modalshow_tag__");if(!showTag){$el.trigger("modalload");$el.data("__modalshow_tag__",true)}var func=$el.data("modalshow");if(func){eval(func)}});$(document).on("modalhide",".modal",function(e){var $el=$(this);var func=$el.data("modalhide");if(func){eval(func)}if($el.data("cache")==false){$el.remove()}})};var _init_scroll=function(selector){$.map(_getMatchElements($(selector),SELECTOR.scroll.selector),SELECTOR.scroll.handler)};var _init_inject=function(el){var $el=$(el);if(!$el.data("inject")){$.map(_getMatchElements($el,SELECTOR.inject.selector),SELECTOR.inject.handler);return}var tag="#"+$el.attr("id");if($el.attr("__inject_cache__")){return}$el.render()};var _init_toggle=function(el){var $el=$(el);if($el.find("div.toggle-handle").length>0){return}var name=$el.attr("name");var onValue=$el.data("on-value");onValue=typeof onValue=="undefined"?"":onValue;var offValue=$el.data("off-value");offValue=typeof offValue=="undefined"?"":offValue;if(name){$el.append('<input type="hidden" name="'+name+'" value="'+($el.hasClass("active")?onValue:offValue)+'"/>')}$el.append('<div class="toggle-handle"></div>');$el.tap(function(){var $t=$(this),v=$t.hasClass("active")?offValue:onValue;$t.toggleClass("active").trigger("toggle",[v]);$t.find("input").val(v)})};var _init_checkbox=_init_radio=function(el){$(el).tap(function(e){try{var $el=$(this);var checkObj=$el.find("input")[0];checkObj.checked=!checkObj.checked}catch(e){}return false})};var SELECTOR={section:{selector:"section",handler:_init_section},article:{selector:"article",handler:_init_article},scroll:{selector:'[data-scroll="true"]',handler:function(el){var zoom=$(el).data("zoom");var tag=zoom==true?true:false;A.Scroll(el,{zoom:tag,hScroll:tag})}},inject:{selector:'[data-inject="true"]',handler:_init_inject}};var FORM_SELECTOR={toggle:{selector:".toggle",handler:_init_toggle},checkbox:{selector:'[data-role="checkbox"]',handler:_init_checkbox},radio:{selector:'[data-role="radio"]',handler:_init_radio}};var _addFormSelector=function(type,selector,handler){FORM_SELECTOR[type]={selector:selector,handler:handler}};return{init:init,initForm:_initFormElement,scroll:_init_scroll,addFormSelector:_addFormSelector,initInject:_init_inject}})(A.$);A.AsideMenu=(function(e){var d,g,c;var f=function(){d=e("#aside_container");g=e("#section_container");if(e("#section_container_mask").length==0){c=e('<div id="section_container_mask"></div>').appendTo("#section_container")
}c.on("tap",a);var m,i,k;var h=function(n){var o=n.touches[0];m={pageX:o.pageX,pageY:o.pageY,time:Number(new Date())};i=0;k=true};var l=function(n){if(!k){return}var o=n.touches[0];i=o.pageX-m.pageX};var j=function(o){if(!k){return}if(Math.abs(i)<6){return}var p=i>0?"right":"left";var n=e("#aside_container aside.active");if(n.data("position")==p){a()}k=false};c.on({"touchstart":h,"touchmove":l,"touchend":j,"touchcancel":j});d.on("tap",".aside-close",a);e(document).on("swipeRight","section.active[data-aside-left]",function(){b(e(this).data("aside-left"))});e(document).on("swipeLeft","section.active[data-aside-right]",function(){b(e(this).data("aside-right"))})};var b=function(j){var i=e(j).addClass("active"),n=i.data("transition"),h=i.data("position")||"left",l=i.data("show-close"),k=i.width(),m=h=="left"?k+"px":"-"+k+"px";if(l&&i.find("div.aside-close").length==0){i.append('<div class="aside-close icon icomoon-close"></div>')}A.Element.scroll(i);if(n=="overlay"){A.anim(i,{translateX:"0%"})}else{if(n=="reveal"){A.anim(g,{translateX:m})}else{A.anim(i,{translateX:"0%"});A.anim(g,{translateX:m})}}e("#section_container_mask").show();A.hasAsideMenuOpen=true};var a=function(k,n){var i=e("#aside_container aside.active"),m=i.data("transition"),h=i.data("position")||"left",l=h=="left"?"-100%":"100%";var j=function(){i.removeClass("active");A.hasAsideMenuOpen=false;n&&n.call(this)};if(m=="overlay"){A.anim(i,{translateX:l},k,j)}else{if(m=="reveal"){A.anim(g,{translateX:"0"},k,j)}else{A.anim(i,{translateX:l},k);A.anim(g,{translateX:"0"},k,j)}}e("#section_container_mask").hide()};return{init:f,show:b,hide:a}})(A.$);A.Page=(function(b){var d=function(e){e=e?e:"";if(e.indexOf("#")==0){e=A.settings.basePagePath+e.replace("#","")+A.settings.basePageSuffix}return e};var a=function(e){return e.indexOf("#")==0?e.substr(1):e};var c=function(g,h){if(typeof g=="string"){g=A.Util.parseHash(g)}if(!g||!g.url){h&&h(null);return}var e=d(g.url);var f={url:e,timeout:20000,type:"GET",success:function(i){h&&h(i)},error:function(i){h&&h("")},isBlock:false};return A.ajax(f)};return{loadContent:c,formatURL:d}})(A.$);A.Router=(function(d){var g=[];var o=function(){d(window).on("popstate",a);d(document).on("click","a",function(r){var q=d(this).data("target"),p=d(this).attr("href");if(!p||p.match(/^#/)||q){r.preventDefault();return false}});d(document).on("tap","[data-target]",j);i()};var i=function(){var q=d("#section_container section").first();var p="#"+q.attr("id");n(p)};var a=function(q){if(q.state&&q.state.hash){var p=q.state.hash;if(g[1]&&p===g[1].hash){A.hasAsideMenuOpen&&A.AsideMenu.hide();A.hasPopupOpen&&A.Popup.close();e()}else{return}}else{return}};var j=function(){var r=d(this),q=r.data("target"),p=r.attr("href");if(l[q]){l[q](p,r)}};var n=function(p){var s=A.Util.parseHash(p);p=s.tag;var r=s.hash;if(A.hasAsideMenuOpen){A.AsideMenu.hide(200,function(){n(r)});return}var t=function(){var u=true;if(g.length==0){q.trigger("pageinit").trigger("pageshow").data("init",true).find("article.active").trigger("articleshow")}else{var v=g[0];if(v.hash===s.hash){return}u=(v.tag==s.tag);if(u){q.trigger("pageshow").find("article.active").trigger("articlehide")}else{m(v.tag,s.tag)}}c(r,u)};var q=d(p);if(q.length==0){if(A.settings.showPageLoading){A.showMask()}A.Page.loadContent(s,function(u){var v=d("<div>"+u+"</div>").find(p).data("source");A.Page.loadContent(v,function(x){if(A.settings.showPageLoading){A.hideMask()}if(v){x=A.Util.formatJSON(x);var w=template.compile(u);u=w(x)}if(d(p).length==0){d("#section_container").append(u)}q=d(p);t()})})}else{t()}};var e=function(){var q=g.shift().tag;var p=g[0].tag;m(q,p,true)};var m=function(r,q,p){A.Transition.run(r,q,p)};var c=function(q,p){var r=A.Util.parseHash(q);if(g.length>0&&d(g[0].tag).data("cache")==false){p=true}if(p){g.shift(r);window.history.replaceState(r,"",q)}else{window.history.pushState(r,"",q)}g.unshift(r)};var h=function(p,q){$el=d(q||"section.active:first");var t=A.Util.parseHash(p);p=t.tag;var r=$el.is("section")?$el:$el.parents("section").first();var s=r.find(p);var u=function(){if(s.hasClass("active")){return}var x=s.attr("id");if(x){r.find('a[data-target="article"]').each(function(z){$refer=d(this);var y=A.Util.parseHash($refer.attr("href"));if(y.tag=="#"+x){$refer.addClass("active")}else{$refer.removeClass("active")}})}else{$el.addClass("active").siblings(".active").removeClass("active")}var w=s;var v=s.addClass("active").siblings(".active");A.Transition.change({target:w,current:v,trigger:"article"})};if(s.length==0){if(A.settings.showPageLoading){A.showMask()}A.Page.loadContent(t,function(v){var w=d("<div>"+v+"</div>").find(p).data("source");A.Page.loadContent(w,function(y){if(A.settings.showPageLoading){A.hideMask()}if(w){y=A.Util.formatJSON(y);var x=template.compile(v);v=x(y)}if(r.find(p).length==0){r.append(v)}s=r.find(p);u()})})}else{u()}};var k=function(p){A.hasAsideMenuOpen?A.AsideMenu.hide():A.AsideMenu.show(p)};var f=function(q){var r=A.Util.parseHash(q);q=r.tag;var p=function(s){var t=d(s);
if(t.hasClass("active")){t.removeClass("active").trigger("modalhide").find("article").trigger("articleshow")}else{t.addClass("active").trigger("modalshow").find("article").trigger("articlehide")}};if(d(q).length==0){if(A.settings.showPageLoading){A.showMask()}A.Page.loadContent(r,function(s){var t=d("<div>"+s+"</div>").find(q).data("source");A.Page.loadContent(t,function(v){if(A.settings.showPageLoading){A.hideMask()}if(t){v=A.Util.formatJSON(v);var u=template.compile(s);s=u(v)}d("body").append(s);p(q)})})}else{p(q)}};var l={section:n,article:h,aside:k,back:function(){window.history.go(-1)},modal:f};var b=function(q,p){l[q]=p};return{init:o,goTo:n,showArticle:h,back:e,showModal:f,add:b,history:function(){return g}}})(A.$);A.Template=(function(c){var a=function(h,i,g){var f='<div class="back-mask"><div class="icon '+g+'"></div><div>'+i+"</div></div>";c(h).html(f)};var d=function(f){a(f,"没有找到相关数据","drawer")};var e=function(f){a(f,"加载中...","cloud-download")};var b=function(f,h,k,j){var i=c(f),j=j||"replace";if(c.type(k)=="array"&&k.length==0){d(i)}else{var g=c(template(h,k));if(j=="replace"){i.html(g)}else{i.append(g)}A.Element.init(g)}};return{render:b,background:a,loading:e,no_result:d}})(A.$);A.Toast=(function(c){var f="toast",b,a,i={toast:'<a href="#">{value}</a>',success:'<a href="#"><i class="icon icomoon-checkmark-circle"></i>{value}</a>',error:'<a href="#"><i class="icon icomoon-cancel-circle"></i>{value}</a></div>',info:'<a href="#"><i class="icon icomoon-info-2"></i>{value}</a>'};var g=function(){c("body").append('<div id="agile_toast"></div>');b=c("#agile_toast");d()};var e=function(){A.anim(b,"scaleOut",function(){b.hide();b.empty()})};var h=function(j,m,l){if(a){clearTimeout(a)}var k=j.split(/\s/);f=k[0];b.attr("class",j).html(i[f].replace("{value}",m)).show();A.anim(b,"scaleIn");if(l!==0){a=setTimeout(e,l||A.settings.toastDuration)}};var d=function(){b.on("tap",'[data-target="close"]',function(){e()})};g();return{show:h,hide:e}})(A.$);A.Transition=(function(g){var k,b,c,a,f={slide:[["slideLeftOut","slideLeftIn"],["slideRightOut","slideRightIn"]],cover:[["","slideLeftIn"],["slideRightOut",""]],slideUp:[["","slideUpIn"],["slideDownOut",""]],slideDown:[["","slideDownIn"],["slideUpOut",""]],popup:[["","scaleIn"],["scaleOut",""]],flip:[["slideLeftOut","flipOut"],["slideRightOut","flipIn"]]};var j=function(){b.trigger("beforepagehide",[k]);c.trigger("beforepageshow",[k]);var m="anim "+(a[0]||"empty"),l="anim animating "+(a[1]||"empty");b.bind("webkitAnimationEnd",function(){i(m,l)}).addClass(m);c.addClass(l)};var i=function(m,l){b.off("webkitAnimationEnd");c.off("webkitAnimationEnd");b.removeClass(m).removeClass("active");c.removeClass(l).addClass("active");!c.data("init")&&c.trigger("pageinit").data("init",true);!b.data("init")&&b.trigger("pageinit").data("init",true);b.trigger("pagehide",[k]);c.trigger("pageshow",[k]);b.find("article.active").trigger("articlehide");c.find("article.active").trigger("articleshow");b=c=null};var e=function(o,n,l){g(":focus").trigger("blur");k=l;b=g(o);c=g(n);var m=k?b.attr("data-transition"):c.attr("data-transition");m=m||A.settings.transitionType;a=k?f[m][1]:f[m][0];j()};var d=function(m,o,n,p,l){if(f[m]){console.error("该转场动画已经存在，请检查你自定义的动画名称(名称不能重复)");return}f[m]=[[o,n],[p,l]]};var h=function(n){var m=g(n.target);var l=g(n.current);var o=m.data("transition");var p=m.data("transition");o=f[o]?f[o][0][1]:"empty";p=f[p]?f[p][0][0]:"empty";A.anim(m,o,function(){m.addClass("active");if(n.trigger){m.trigger(n.trigger+"show")}});A.anim(l,p,function(){l.removeClass("active");if(n.trigger){l.trigger(n.trigger+"hide")}})};return{run:e,add:d,change:h}})(A.$);A.Util=(function($){var parseHash=function(hash){var url=hash;url=_script(url);var tag,query,param={};var arr=hash.split("?");tag=arr[0];if(arr.length>1){var seg,s;query=arr[1];seg=query.split("&");for(var i=0;i<seg.length;i++){s=seg[i].split("=");param[s[0]]=s[1]}}if(tag.indexOf("#")!=0){var p=A.Util.parseURL(url);if(p.getFragment()){tag="#"+p.getFragment()}else{var tags=tag.split("/");tag=tags[tags.length-1];tag="#"+tag.split(".")[0]}hash=tag+(arr.length>1?"?"+arr[1]:"");url=url.replace(new RegExp(tag,"g"),"")}return{url:url,hash:hash,tag:tag,query:query,param:param}};var _formatJSON=function(data){return data?(typeof data=="string"?eval("("+data+")"):data):{}};var formatDate=function(date,format){var o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),"S":date.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(date.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return format};var URLParser=function(url){this._fields={"Username":4,"Password":5,"Port":7,"Protocol":2,"Host":6,"Pathname":8,"URL":0,"Querystring":9,"Fragment":10};this._values={};this._regex=null;
this.version=0.1;this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/;for(var f in this._fields){this["get"+f]=this._makeGetter(f)}if(typeof url!="undefined"){this._parse(url)}};URLParser.prototype.setURL=function(url){this._parse(url)};URLParser.prototype._initValues=function(){for(var f in this._fields){this._values[f]=""}};URLParser.prototype._parse=function(url){this._initValues();var r=this._regex.exec(url);if(!r){throw"DPURLParser::_parse -> Invalid URL"}for(var f in this._fields){if(typeof r[this._fields[f]]!="undefined"){this._values[f]=r[this._fields[f]]}}};URLParser.prototype._makeGetter=function(field){return function(){return this._values[field]}};var _isCrossDomain=function(url){if(!url||url.indexOf(":")<0){return false}var urlOpts=A.Util.parseURL(url);if(!urlOpts.getProtocol()){return false}return !((location.protocol.replace(":","")+location.host)==(urlOpts.getProtocol()+urlOpts.getHost()+":"+urlOpts.getPort()))};var _script=function(str){return str?str.trim().replace(/\$\{([^\}]*)\}/g,function(s,s1){try{return eval(s1.trim())}catch(e){return""}}):""};var checkBoolean=function(){var result=false;for(var i=0;i<arguments.length;i++){if(typeof arguments[i]=="boolean"){return arguments[i]}}return result};var _eval=function(str){str=(str||"").trim();var obj={};str.replace(/\$\{(.*]*)\}/g,function(s,s1){obj=eval("("+s1.trim()+")");return""});return obj};var _ajax=function(opts){if(!opts||!opts.url){return}var random="__ajax_random__="+Math.random();opts.url+=(opts.url.split(/\?|&/i).length==1?"?":"&")+random;var _isBlock=A.Util.checkBoolean(opts.isBlock,A.settings.showPageLoading);var ajaxData={url:opts.url,timeout:20000,type:opts.type||"get",dataType:opts.dataType||"text",success:function(html){opts.success&&opts.success(html);if(_isBlock){A.hideMask()}},error:function(html){opts.error&&opts.error(null);if(_isBlock){A.hideMask()}}};var isCross=_isCrossDomain(opts.url);var handler=$.ajax;if(isCross){ajaxData.dataType="jsonp";handler=A.settings.crossDomainHandler||handler}if(ajaxData.dataType.toLowerCase()=="jsonp"){ajaxData.jsonp=opts.jsonp||"__jsonpcallback"}if(_isBlock){A.showMask()}handler(ajaxData)};return{parseHash:parseHash,formatDate:formatDate,formatJSON:_formatJSON,parseURL:function(url){return new URLParser(url)},isCrossDomain:_isCrossDomain,script:_script,eval:_eval,ajax:_ajax,checkBoolean:checkBoolean}})(A.$);(function(){A.cache={};A.cache.set=function(b,a){window.localStorage.setItem(b,JSON.stringify(a))};A.cache.get=function(a){return JSON.parse(window.localStorage.getItem(a))};A.cache.remove=function(a){window.localStorage.removeItem(a)}})();(function($){A.anim=function(el,animName,duration,ease,callback){var d,e,c;var len=arguments.length;for(var i=2;i<len;i++){var a=arguments[i];var t=$.type(a);t=="number"?(d=a):(t=="string"?(e=a):(t=="function")?(c=a):null)}$(el).animate(animName,d||A.settings.transitionTime,e||A.settings.transitionTimingFunc,c)};A.showMask=function(text,closeCallback){if(typeof text=="function"){closeCallback=text;text=""}A.Popup.loading(text,closeCallback)};A.hideMask=function(){A.Popup.close(true)};A.showToast=function(text,type,duration){type=type||"toast";A.Toast.show(type,text,duration)};A.hideToast=function(){A.Toast.hide()};A.alert=function(title,content){A.Popup.alert(title,content)};A.confirm=function(title,content,okCall,cancelCall){A.Popup.confirm(title,content,okCall,cancelCall)};A.popup=function(options){A.Popup.show(options)};A.closePopup=function(){A.Popup.close()};A.popover=function(html,pos,arrowDirection,onShow){A.Popup.popover(html,pos,arrowDirection,onShow)};A.tmpl=function(containerSelector,templateId,data,type){A.Template.render(containerSelector,templateId,data,type)};A.ajax=A.Util.ajax;A.render=function(opts){var options={container:null,tmpl:null,tmplSource:null,tmplId:null,data:null,dataSource:null,type:"after",callback:function(){}};$.extend(options,opts);var handleHTML=function(opts,callback){if(opts.tmpl){callback(opts.tmpl)}else{var url=opts.tmplId||opts.tmplSource;if(!url){callback("");return}var html="";var hashObj=A.Util.parseHash(url);var $script=$(hashObj.tag);var scriptKey="__TEMPLATE_"+hashObj.tag+"__";if(A.cache[scriptKey]){callback(A.cache[scriptKey])}else{if($script.length==0){A.Page.loadContent(hashObj,function(h){html=h||"";callback(html);A.cache[scriptKey]=html})}else{if($script.html().trim()==""&&$script.attr("src")){A.Page.loadContent($script.attr("src"),function(h){html=h||"";$script.text(html);callback($script);A.cache[scriptKey]=$script})}else{html=$script;callback(html);A.cache[scriptKey]=html}}}}};var handleData=function(opts,callback){if(opts.data){callback(typeof opts.data=="string"?A.Util.eval(opts.data):opts.data)}else{if(opts.dataSource){var hashObj=A.Util.parseHash(opts.dataSource);A.Page.loadContent(hashObj,function(data){data=A.Util.formatJSON(data);callback(data)})}else{callback({})}}};handleHTML(options,function(html){var $target,type=options.type||"after";var $html=$(html);
if(!$html.is("script")){options.container=$html;$html=$('<script type="text/html"><\/script>').append($html.html())}var typeMap={replace:"html",after:"append",before:"prepend"};if(options.container&&options.container.length>0){var $target=$(options.container)}else{for(var k in typeMap){var container=$html.data(k);if(container){$target=$(container);type=k;break}}}var _isShowBlock=false;_isShowBlock=A.Util.checkBoolean($html.data("loading")||_isShowBlock);if(_isShowBlock){A.showMask()}handleData(options,function(o){if(!o||o=={}||o==[]){options.callback("");return}try{html=$(template.compile($html.html())(o))}catch(e){html=""}if($target&&$target.length>0){$target[typeMap[type]](html);A.Element.init(html)}options.callback(html);if(_isShowBlock){A.hideMask()}})})}})(A.$);A.Popup=(function(f){var c,o,l,h,j={"top":{top:0,left:0,right:0},"top-second":{top:"44px",left:0,right:0},"center":{top:"50%",left:"5%",right:"5%","border-radius":"3px"},"bottom":{bottom:0,left:0,right:0},"bottom-second":{bottom:"51px",left:0,right:0}},d={top:["slideDownIn","slideUpOut"],bottom:["slideUpIn","slideDownOut"],defaultAnim:["bounceIn","bounceOut"]},q={alert:'<div class="popup-title">{title}</div><div class="popup-content">{content}</div><div id="popup_btn_container"><a data-target="closePopup" data-icon="icomoon-checkmark">{ok}</a></div>',confirm:'<div class="popup-title">{title}</div><div class="popup-content">{content}</div><div id="popup_btn_container"><a class="cancel" data-icon="icomoon-close">{cancel}</a><a data-icon="icomoon-checkmark">{ok}</a></div>',loading:'<i class="icon icomoon-spinner5 spinner"></i><p>{title}</p>'};var n=function(){f("body").append('<div id="agile_popup"></div><div id="agile_popup_mask"></div>');o=f("#agile_popup_mask");c=f("#agile_popup");m()};var p=function(t){var v={height:undefined,width:undefined,opacity:0.3,url:null,tplId:null,tplData:{},html:"",pos:"center",clickMask2Close:true,showCloseBtn:true,arrowDirection:undefined,animation:true,timingFunc:"linear",duration:200,onShow:undefined,onHide:undefined,onClose:undefined};f.extend(v,t);h=v.clickMask2Close;o.css("opacity",v.opacity);c.attr({"style":"","class":""});v.width&&c.width(v.width);v.height&&c.height(v.height);var w=f.type(v.pos);if(w=="object"){c.css(v.pos);l=d["defaultAnim"]}else{if(w=="string"){if(j[v.pos]){c.css(j[v.pos]);var s=v.pos.indexOf("top")>-1?"top":(v.pos.indexOf("bottom")>-1?"bottom":"defaultAnim");l=d[s]}else{c.addClass(v.pos);l=d["defaultAnim"]}}else{return}}o.show();var u;if(v.html){u=v.html}else{if(v.url){u=A.Page.loadContent(v.url)}else{if(v.tplId){u=template(v.tplId,v.tplData)}}}if(v.showCloseBtn){u+='<div id="tag_close_popup" data-target="closePopup" class="icon icomoon-cancel-circle"></div>'}if(v.arrowDirection){c.addClass("arrow "+v.arrowDirection);c.css("padding","8px");if(v.arrowDirection=="top"||v.arrowDirection=="bottom"){l=d[v.arrowDirection]}}c.html(u).show();A.Element.init(c);v.onShow&&v.onShow.call(c);f(document).trigger("popupshow",[c]);v.onHide&&f(document).on("popuphide",function(){v.onHide();v.onHide=undefined});v.onClose&&f(document).on("popupclose",function(){v.onClose();v.onClose=undefined});if(v.pos=="center"){var r=c.height();c.css("margin-top","-"+r/2+"px")}if(v.animation){A.anim(c,l[0],v.duration,v.timingFunc)}A.hasPopupOpen=true};var g=function(r){o.hide();if(l&&!r){A.anim(c,l[1],200,function(){c.hide().empty();A.hasPopupOpen=false})}else{c.hide().empty();A.hasPopupOpen=false}f(document).trigger("popuphide")};var m=function(){var r=function(){g();f(document).trigger("popupclose")};o.on("tap",function(){h&&r()});c.on("tap",'[data-target="closePopup"]',function(){r()})};var k=function(t,s,u){var r=q.alert.replace("{title}",t).replace("{content}",s).replace("{ok}",u||"确定");p({html:r,pos:"center",clickMask2Close:false,showCloseBtn:false})};var a=function(v,t,u,r){var s=q.confirm.replace("{title}",v).replace("{content}",t).replace("{cancel}","取消").replace("{ok}","确定");p({html:s,pos:"center",clickMask2Close:false,showCloseBtn:false});f('#popup_btn_container [data-icon="icomoon-checkmark"]').tap(function(){g();u.call(this)});f('#popup_btn_container [data-icon="icomoon-close"]').tap(function(){g();r.call(this)})};var i=function(r,u,s,t){p({html:r,pos:u,showCloseBtn:false,arrowDirection:s,onShow:t})};var e=function(s,t){var r=q.loading.replace("{title}",s||"加载中...");p({html:r,pos:"loading",opacity:0.1,animation:true,clickMask2Close:false,onClose:t})};var b=function(s){var r='<div class="actionsheet">';f.each(s,function(t,u){r+='<button class="button block bg-nephritis white" style="background-color: '+u.color+' !important;">'+u.text+"</button>"});r+='<button class="button block bg-alizarin white">取消</button>';r+="</div>";p({html:r,pos:"bottom",showCloseBtn:false,onShow:function(){f(this).find("button").each(function(u,t){f(t).on("tap",function(){if(s[u]&&s[u].handler){s[u].handler.call(t)}g()})})}})};n();return{show:p,close:g,alert:k,confirm:a,popover:i,loading:e,actionsheet:b}})(A.$);(function(a){var b=function(r,d){var n={months:["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],days:["日","一","二","三","四","五","六"],swipeable:true,date:new Date(),onRenderDay:undefined,onSelect:undefined},q=this,v=a(r),e,c,i,l,u,p;
var k=function(){q.settings=a.extend({},n,d);u=q.settings.date.getFullYear();p=q.settings.date.getMonth();l=new Date(u,p,q.settings.date.getDate());j();h()};var s=function(w){return(new Date(w.getFullYear(),w.getMonth(),1)).getDay()};var t=function(w){return(new Date(w.getFullYear(),w.getMonth()+1,0)).getDate()};var j=function(){var x="";x+='<div class="agile-calendar">';x+=f(u,p);x+=g();x+='<div class="agile-calendar-body">';x+=m(l);x+="</div></div>";v.html(x);var w=v.find("span");e=w.eq(0);c=w.eq(1);i=v.find(".agile-calendar-body")};var f=function(x,y){var w='<div class="agile-calendar-nav">';w+='<div><i class="icon icomoon-arrow-left8 __previous" data-year='+x+"></i><span>"+x+'</span><i class="icon icomoon-arrow-right8 __next" data-year='+x+"></i></div>";w+='<div><i class="icon icomoon-arrow-left8 __previous" data-month='+y+"></i> <span>"+q.settings.months[y]+'</span><i class="icon icomoon-arrow-right8 __next" data-month='+y+"></i></div>";w+="</div>";return w};var g=function(){var x="<table><thead><tr>";for(var w=0;w<7;w++){x+="<th>"+q.settings.days[w]+"</th>"}x+="</tr></thead></table>";return x};var m=function(y){var w=s(y),E=t(y),D=Math.ceil((w+E)/7),C,B="";u=y.getFullYear();p=y.getMonth();C=new Date(u,p,1-w);B+="<table><tbody>";for(var z=0;z<D;z++){B+="<tr>";for(var x=0;x<7;x++){B+=o(C,p);C.setDate(C.getDate()+1)}B+="</tr>"}B+="</tbody></table>";return B};var o=function(x,C){var z=(x.getMonth()!==C);var w=q.format(x);var B=(q.format(q.settings.date)==w)?"active":"";var y=x.getDate();if(q.settings.onRenderDay){y=q.settings.onRenderDay.call(null,y,w)}return z?"<td>&nbsp;</td>":'<td data-selected="selected" class="'+B+'" data-date= '+w+">"+y+"</td>"};var h=function(){var w,x;v.on("tap",function(z){w=a(z.target);if(w.is("[data-year].__next")){l.setFullYear(l.getFullYear()+1);q.refresh(l)}else{if(w.is("[data-year].__previous")){l.setFullYear(l.getFullYear()-1);q.refresh(l)}else{if(w.is("[data-month].__next")){l.setMonth(l.getMonth()+1);q.refresh(l)}else{if(w.is("[data-month].__previous")){l.setMonth(l.getMonth()-1);q.refresh(l)}}}}x=w.closest("td");if(!w.is("td")&&x.length>0){w=x}if(w.is("td")){var y=w.data("date");if(y&&q.settings.onSelect){q.settings.onSelect.call(q,y)}}});v.on("swipeLeft",function(){l.setMonth(l.getMonth()+1);q.refresh(l)});v.on("swipeRight",function(){l.setMonth(l.getMonth()-1);q.refresh(l)})};this.refresh=function(z){var B=new Date(u,p,1),x=new Date(z.getFullYear(),z.getMonth(),1),C=undefined,y;if(B.getTime()==x.getTime()){return}C=B<x?"slideLeftRound":"slideRightRound";e.text(z.getFullYear());c.text(this.settings.months[z.getMonth()]);var w=m(z);A.anim(i,C,function(){i.html(w)})};k()};b.prototype.parse=function(d){var c=/^(\d{4})(?:\-|\/)(\d{1,2})(?:\-|\/)(\d{1,2})$/;return c.test(d)?new Date(parseInt(RegExp.$1,10),parseInt(RegExp.$2,10)-1,parseInt(RegExp.$3,10)):null};b.prototype.format=function(e){var g=e.getFullYear(),c=e.getMonth()+1,f=e.getDate();c=(c<10)?("0"+c):c;f=(f<10)?("0"+f):f;return g+"-"+c+"-"+f};A.Calendar=b})(A.$);(function(c){var a={},b=1;A.Scroll=function(e,i){var d,f,h=c(e),g={hScroll:false,bounce:true,lockDirection:true,useTransform:true,useTransition:false,checkDOMChanges:false,hideScrollbar:true,fadeScrollbar:true,zoom:false,onBeforeScrollStart:function(k){var j=k.target;while(j.nodeType!=1){j=j.parentNode}if(j.tagName!="SELECT"&&j.tagName!="INPUT"&&j.tagName!="TEXTAREA"){k.preventDefault()}}};f=h.data("_jscroll_");if(f&&a[f]){d=a[f];c.extend(d.scroller.options,i);d.scroller.refresh();return d}else{f="_jscroll_"+b++;h.data("_jscroll_",f);c.extend(g,i);scroller=new iScroll(h[0],g);return a[f]={scroller:scroller,destroy:function(){scroller.destroy();delete a[f]}}}}})(A.$);(function(b){function a(r,u){var y=function(){},k=function(){return true},t=false,g=0,s=200,f,h,m,o,d,e,x,q,v=0;var p=this;if(b.isPlainObject(r)){f=b(r.selector);u=r.showDots;k=r.onBeforeSlide||k;y=r.onAfterSlide||y;q=r.autoPlay;v=r.interval||3000;s=r.speed||s}else{f=b(r)}var i=function(){m=f.children().first();o=m.children();d=o.length;e=f.offset().width;m.css("width",d*e);o.css({"width":e,"float":"left"}).show();if(u==undefined){u=true}u&&l();n(0,0);y(0);q&&w()};var w=function(){setTimeout(function(){if(g==d-1){n(0)}else{p.next()}w()},v)};var l=function(){h=f.find(".dots");if(h.length>0){h.show()}else{var E=d*20;var D='<div class="dots"><ul>';for(var C=0;C<d;C++){D+='<li index="'+C+'"';if(C==0){D+='class="active"'}D+='><a href="#"></a></li>'}D+="</ul></div>";f.append(D);h=f.find(".dots");h.children().css("width",E+"px");h.find("li").on("tap",function(){var F=b(this).attr("index");n(parseInt(F),s)})}};var n=function(C,D){D=D||s;m.css({"-webkit-transition-duration":D+"ms","-webkit-transform":"translate3D("+-(C*e)+"px,0,0)"});if(g!=C){g=C;if(h){b(h.find("li").get(g)).addClass("active").siblings().removeClass("active")}y(g)}};var B=function(){m.on("touchstart",z,false);m.on("touchmove",c,false);m.on("touchend",j,false)};var z=function(C){var D=C.touches[0];start={pageX:D.pageX,pageY:D.pageY,time:Number(new Date())};
isScrolling=undefined;x=0;m[0].style.webkitTransitionDuration=0;t=true};var c=function(D){if(!t){return}var E=D.touches[0];x=E.pageX-start.pageX;if(typeof isScrolling=="undefined"){isScrolling=Math.abs(x)<Math.abs(E.pageY-start.pageY)}if(!isScrolling){D.preventDefault();var C=!g&&x>0||g==d-1&&x<0;if(C){return}var F=(x-g*e);m[0].style.webkitTransform="translate3D("+F+"px,0,0)"}};var j=function(E){var D=(Number(new Date())-start.time<250&&Math.abs(x)>20)||Math.abs(x)>e/3;var C=!g&&x>0||g==d-1&&x<0;if(!isScrolling){if(k(g,x)){n(g+(D&&!C?(x<0?1:-1):0),s)}else{n(g)}}t=false};i();B();this.refresh=function(){m.attr("style","");i()};this.prev=function(){if(g){n(g-1,s)}};this.next=function(){if(g<d-1){n(g+1,s)}};this.index=function(C){n(C)}}A.Slider=a})(A.$);(function(d){var a={},c=1;function b(f,m,o){var k,i,j,n,e,h,q,p={selector:undefined,type:"pullDown",minPullHeight:10,pullText:"下拉刷新更多",releaseText:"松开加载更新",refreshText:"加载中请稍后",refreshTip:false,onPullIcon:"icomoon-arrow-down2",onReleaseIcon:"icon-reverse",onRefreshIcon:"icomoon-spinner5 spinner",callback:undefined};if(typeof f==="object"){d.extend(p,f)}else{p.selector=f;p.type=m;p.callback=o;if(m==="pullUp"){d.extend(p,{pullText:"上拉加载更多",releaseText:"松开加载更新",refreshText:"加载中请稍后",onPullIcon:"icomoon-arrow-up2"})}}q=p.type==="pullDown"?true:false;var l=function(s){i=d(s.selector).children()[0];var r='<div class="refresh-container"><span class="refresh-icon carrot '+s.onPullIcon+'"></span><span class="refresh-label sliver">'+s.pullText+"</span>"+(s.refreshTip?'<div class="refresh-tip">'+s.refreshTip+"</div>":"")+"</div>";if(q){j=d(r).prependTo(i)}else{j=d(r).appendTo(i)}h=j.height();n=j.find(".refresh-icon");e=j.find(".refresh-label")};var g=function(r){return A.Scroll(r.selector,{topOffset:q?h:0,bounce:true,onScrollMove:function(){if(this.y>r.minPullHeight&&q&&!n.hasClass(r.onReleaseIcon)){n.addClass(r.onReleaseIcon);e.html(r.releaseText);this.minScrollY=0}else{if(this.y<r.minPullHeight&&q&&n.hasClass(r.onReleaseIcon)){n.removeClass(r.onReleaseIcon);e.html(r.pullText);this.minScrollY=-h}else{if(this.y<(this.maxScrollY-r.minPullHeight)&&!q&&!n.hasClass(r.onReleaseIcon)){n.addClass(r.onReleaseIcon);e.html(r.releaseText);this.maxScrollY=this.maxScrollY}else{if(this.y>(this.maxScrollY+r.minPullHeight)&&!q&&n.hasClass(r.onReleaseIcon)){n.removeClass(r.onReleaseIcon);e.html(r.pullText);this.maxScrollY=h}}}}},onScrollEnd:function(){if(n.hasClass(r.onReleaseIcon)){n.removeClass(r.onReleaseIcon).removeClass(r.onPullIcon).addClass(r.onRefreshIcon);e.html(r.refreshText);var s=this;setTimeout(function(){r.callback.call(s)},1)}},onRefresh:function(){n.removeClass(r.onRefreshIcon).addClass(r.onPullIcon);e.html(r.pullText)}})};l(p);k=g(p);return k}A.Refresh=function(e,i,j){var h,g;if(e.selector){h=d(e.selector)}else{h=d(e)}g=h.data("_refresh_");if(g&&a[g]){return a[g]}else{g="_refresh_"+c++;h.data("_refresh_",g);var f=new b(e,i,j);return a[g]={scroller:f.scroller,destroy:function(){delete a[g];f.scroller.destroy();d(".refresh-container",e).remove()}}}}})(A.$);(function(a){a.fn.render=function(f){var e=a(this);if(!e.data("inject")){return}var d={data:null,dataSource:e.data("source")};a.extend(d,f);delete d.container;if(!(d.data||d.dataSource)){return}var c="#"+e.attr("id");d.tmplId=c;d.callback=function(i){var g=e;var h=a('[__inject_dependence__="'+c+'"]');if(d.type=="replace"){a('[__inject_dependence__="'+c+'"]').remove()}else{if(d.type=="after"){g=h.length==0?e:h.last()}else{if(d.type=="before"){}}}e.attr("__inject_cache__",true);g.after(a(i).attr("__inject_dependence__",c));A.Element.init(e.parent());if(f&&f.callback){f.callback(i)}};A.render(d)};a.fn.renderReplace=function(c,d){b(this,"replace",c,d)};a.fn.renderAfter=function(c,d){b(this,"after",c,d)};a.fn.renderBefore=function(c,d){b(this,"before",c,d)};function b(d,c,f,g){if(typeof f=="function"&&g==null){g=f;f=null}var e={};e.type=c;if(typeof f=="string"){e.dataSource=f}else{if(typeof f=="object"){e.data=f}}e.callback=g;a(d).render(e)}})(A.$);(function(){if(JSON){JSON.stringify=function(c){var b=[];if(typeof c=="string"){return'"'+c.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"'}if(typeof c=="undefined"){return""}if(typeof c!="object"){return c.toString()}if(c===null){return null}if(c instanceof Array){for(var a=0;a<c.length;a++){b.push(this.stringify(c[a]))}b="["+b.join()+"]"}else{for(var a in c){b.push('"'+a+'":'+this.stringify(c[a]))}b="{"+b.join()+"}"}return b}}})();